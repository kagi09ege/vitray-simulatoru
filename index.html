<!DOCTYPE html>
<html>
<head>
    <title>Vitray IÅŸÄ±k SimÃ¼lasyonu</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <style>
        body { font-family: Arial; text-align: center; margin-top: 20px; }
        button { 
            padding: 12px 24px;
            font-size: 18px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        #output { margin: 20px; min-height: 300px; border: 1px dashed #ccc; padding: 10px; }
        #plot { max-width: 100%; }
    </style>
</head>
<body>
    <h1>ğŸ¨ Vitray IÅŸÄ±k SimÃ¼lasyonu</h1>
    <button onclick="runSimulation()">SIMÃœLASYONU BAÅLAT</button>
    <div id="output">
        <p>SonuÃ§lar burada gÃ¶rÃ¼necek...</p>
        <img id="plot" style="display:none;">
    </div>

    <script>
        async function runSimulation() {
            const output = document.getElementById("output");
            output.innerHTML = "â³ Pyodide yÃ¼kleniyor... (Ä°lk seferde 15-30 saniye sÃ¼rebilir)";
            
            // Pyodide'i yÃ¼kle
            let pyodide = await loadPyodide();
            await pyodide.loadPackage(["matplotlib", "numpy"]);
            
            output.innerHTML = "ğŸ” SimÃ¼lasyon Ã§alÄ±ÅŸtÄ±rÄ±lÄ±yor...";
            
            // Python kodu
            try {
                await pyodide.runPython(`
                import matplotlib.pyplot as plt
                import numpy as np
                import io, base64
                
                # Vitray Ä±ÅŸÄ±k daÄŸÄ±lÄ±m simÃ¼lasyonu
                x = np.linspace(0, 10, 100)
                y = np.sin(x) * np.cos(x**2)  # Ã–rnek desen
                
                plt.figure(figsize=(8, 4))
                plt.plot(x, y, color='purple', linewidth=3)
                plt.title("Vitray IÅŸÄ±k Deseni", fontsize=14)
                plt.xlabel("Pencere AlanÄ±")
                plt.ylabel("IÅŸÄ±k Åiddeti")
                plt.grid(True)
                
                # GrafiÄŸi HTML'e aktarma
                buf = io.BytesIO()
                plt.savefig(buf, format='png')
                buf.seek(0)
                image_base64 = base64.b64encode(buf.read()).decode('utf-8')
                plt.close()
                js_image = f"data:image/png;base64,{image_base64}"
                js.document.getElementById("plot").src = js_image
                `);
                
                document.getElementById("plot").style.display = "block";
                output.innerHTML = "âœ… SimÃ¼lasyon baÅŸarÄ±lÄ±! SonuÃ§lar:";
            } catch (error) {
                output.innerHTML = `âŒ Hata: ${error}`;
            }
        }
    </script>
</body>
</html>
